---
title: 视频编码学习
date: 2024-11-24 00:43:47
# description: 
# mermaid: true
categories:
  - video
tags:
  - video
---

![20241105180107](https://cdn.jsdelivr.net/gh/24849748/PicBed/ob/20241105180107.png)

## RAW 图

* 未经过压缩或处理的图像格式，直接记录了传感器捕获的原始数据
* 它包含的通常是每个像素的原始光信号信息，比如亮度和色彩值，几乎不做后期处理


## 像素格式

[海思](https://www.hiascend.com/doc_center/source/zh/canncommercial/80RC2/apiref/appdevgapi/aclpythondevg_01_0915.html)



## YUV

YUV 是一种颜色编码方法，主要用于视频和图像处理
还有其他叫法 YCbCr、YPbPr

* Y 表示亮度（Luminance、Luma）
* U 和 V 表示色度（Chrominance、Chroma）

早期黑白电视可能就是只用 Y 分量

由于人体对颜色感知能力有限，所以 U 和 V 分量对整体图像影响较小，所以可以适当丢弃，以节省带宽

常见 YUV 几种格式：
* YUV 4:4:4，一个Y对应一组UV
* YUV 4:2:2，两个Y对应一组UV
* YUV 4:2:0，四个Y对应一组UV

以YUV 4:2:2为例，每个像素占用2字节，Y占1字节，UV共用1字节

![20241105162503](https://cdn.jsdelivr.net/gh/24849748/PicBed/ob/20241105162503.png)

> Q: 为什么用四宫格表示？
> A: YUV格式中，UV分量最小时需要四个像素共享一个UV分量对(YUV4:2:0)，所以取最大公因数4，即四个像素共享一个UV分量对。
> 又因为共享一对UV分量，平面上UV分量比较临近，所以这四个人像素点被安排在两条线上

其他格式的四宫格图：
![20241105163036](https://cdn.jsdelivr.net/gh/24849748/PicBed/ob/20241105163036.png)

![20241105163044](https://cdn.jsdelivr.net/gh/24849748/PicBed/ob/20241105163044.png)
![20241105163048](https://cdn.jsdelivr.net/gh/24849748/PicBed/ob/20241105163048.png)

#### 内存地址

YUV4:4:4
* 24 bit
![20241105163424](https://cdn.jsdelivr.net/gh/24849748/PicBed/ob/20241105163424.png)

YUV4:2:2
* 16 bit
根据UV分量内存位置不同，有两种格式：
YUYV (YUY2)
![20241105163826](https://cdn.jsdelivr.net/gh/24849748/PicBed/ob/20241105163826.png)
UYVY
![20241105163830](https://cdn.jsdelivr.net/gh/24849748/PicBed/ob/20241105163830.png)

YUV4:2:0
* 12 bit
* 也有好几种格式，YU12、NV12等，先不做过多了解
NV12
![20241105164236](https://cdn.jsdelivr.net/gh/24849748/PicBed/ob/20241105164236.png)


有些命名后面带字母，比如 YUV420p，p就是planer，平面模式就是把YUV分开存储

```
I420: YYYYYYYY UU VV    =>YUV420P
YV12: YYYYYYYY VV UU    =>YUV420P
NV12: YYYYYYYY UVUV     =>YUV420SP
NV21: YYYYYYYY VUVU     =>YUV420SP
```

