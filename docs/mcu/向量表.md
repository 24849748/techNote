
## 向量表

当系统发生异常并要响应它时，内核需要定位其处理接口，这些接口存储的表就叫做 **（异常）向量表**。
默认情况下 CM3 认为该表位于 0 地址处，且各向量单位是 4 字节。

对于任何器件，向量表的起始处必须包含以下列出向量：

| 地址 | 序号 | 内容（32位整数地址）|
| ---- | ---- | ---- |
|0x0000_0000| - | 栈顶（MSP 初始值） |
|0x0000_0004| 1 | Reset_Handler（PC 初始值） |
|0x0000_0008| 2 | NMI_Handler |
|0x0000_000C| 3 | HardFault_Handler |
|... | ... | ... |



可以在单步调试调出 memory 窗口并检查对应函数地址的值。
![20250106002256](https://cdn.jsdelivr.net/gh/24849748/PicBed/ob/20250106002256.png)

!!! tip 为什么实际地址会相差 1 ？
    ARM 规定写PC指针时，一定要保证LSB为奇数，以表明这是在 Thumb 状态下执行的；若为偶数，则视为企图进入 ARM 模式，CM3 将产生一个 Fault 异常。


## 重定向向量表

NVIC 提供了一个寄存器 **向量表偏移量寄存器(VTOR)**

1. 动态修改向量表
2. bl 跳 app 后需要重定向向量表

```c
    SCB->VTOR = 0x08000000;
```


